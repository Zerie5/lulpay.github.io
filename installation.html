<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LulPay - Installation</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <style>
        .hero {
            background-color: #6200EE;
            color: white;
            padding: 40px 0;
            margin-bottom: 40px;
        }
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
        }
        .step {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .step:last-child {
            border-bottom: none;
        }
        .nav-tabs .nav-link {
            color: #6200EE;
        }
        .nav-tabs .nav-link.active {
            color: #6200EE;
            font-weight: bold;
            border-bottom: 2px solid #6200EE;
        }
    </style>
</head>
<body>
    <div class="hero">
        <div class="container">
            <h1>LulPay Installation</h1>
            <p class="lead">How to set up and run the LulPay application</p>
        </div>
    </div>

    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Installation</li>
            </ol>
        </nav>

        <!-- Tab navigation -->
        <ul class="nav nav-tabs mb-4" id="installationTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="frontend-tab" data-bs-toggle="tab" data-bs-target="#frontend" type="button" role="tab" aria-controls="frontend" aria-selected="true">Frontend (Flutter)</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="backend-tab" data-bs-toggle="tab" data-bs-target="#backend" type="button" role="tab" aria-controls="backend" aria-selected="false">Backend (Spring Boot)</button>
            </li>
        </ul>

        <!-- Tab content -->
        <div class="tab-content" id="installationTabsContent">
            <!-- Frontend Tab -->
            <div class="tab-pane fade show active" id="frontend" role="tabpanel" aria-labelledby="frontend-tab">
                <div class="row">
                    <div class="col-md-12">
                        <h2>Prerequisites</h2>
                        <p>Before you begin, ensure you have the following installed:</p>
                        <ul>
                            <li>Flutter SDK (version 3.0.0 or higher)</li>
                            <li>Dart SDK (version 2.17.0 or higher)</li>
                            <li>Android Studio or Visual Studio Code</li>
                            <li>Android SDK (for Android development)</li>
                            <li>Xcode (for iOS development, macOS only)</li>
                            <li>Git</li>
                        </ul>
                    </div>
                </div>

                <div class="step">
                    <h3>Step 1: Clone the Repository</h3>
                    <p>First, clone the repository to your local machine:</p>
                    <pre>
git clone https://github.com/yourusername/lulpay.git
cd lulpay
                    </pre>
                </div>

                <div class="step">
                    <h3>Step 2: Install Dependencies</h3>
                    <p>Install all the required dependencies:</p>
                    <pre>
flutter pub get
                    </pre>
                </div>

                <div class="step">
                    <h3>Step 3: Configure Environment Variables</h3>
                    <p>Create a <code>.env</code> file in the root directory with the following variables:</p>
                    <pre>
API_BASE_URL=https://api.example.com
API_KEY=your_api_key
                    </pre>
                    <div class="alert alert-warning">
                        <strong>Note:</strong> Replace the values with your actual API URL and key. For security reasons, never commit this file to version control.
                    </div>
                </div>

                <div class="step">
                    <h3>Step 4: Run the App</h3>
                    <p>Connect a device or start an emulator, then run the app:</p>
                    <pre>
flutter run
                    </pre>
                </div>

                <div class="step">
                    <h3>Step 5: Build for Production</h3>
                    <p>To build the app for production:</p>
                    <h4>Android</h4>
                    <pre>
flutter build apk --release
# or
flutter build appbundle --release
                    </pre>
                    <h4>iOS (macOS only)</h4>
                    <pre>
flutter build ios --release
                    </pre>
                </div>

                <div class="row mt-4">
                    <div class="col-md-12">
                        <h2>Troubleshooting</h2>
                        <div class="accordion" id="troubleshootingAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingOne">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                        Build fails with dependency errors
                                    </button>
                                </h2>
                                <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#troubleshootingAccordion">
                                    <div class="accordion-body">
                                        Try running <code>flutter clean</code> followed by <code>flutter pub get</code> to refresh dependencies.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingTwo">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                        App crashes on startup
                                    </button>
                                </h2>
                                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#troubleshootingAccordion">
                                    <div class="accordion-body">
                                        Check that your <code>.env</code> file is correctly configured and that you have the required permissions for API access.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Backend Tab -->
            <div class="tab-pane fade" id="backend" role="tabpanel" aria-labelledby="backend-tab">
                <div class="row">
                    <div class="col-md-12">
                        <h2>Prerequisites</h2>
                        <p>Before you begin, ensure you have the following installed:</p>
                        <ul>
                            <li>Java Development Kit (JDK) 17 or higher</li>
                            <li>Maven (optional, as the project includes Maven Wrapper)</li>
                            <li>PostgreSQL database</li>
                            <li>Git</li>
                            <li>IDE (IntelliJ IDEA, Eclipse, or VS Code with Spring Boot extensions)</li>
                        </ul>
                    </div>
                </div>

                <div class="step">
                    <h3>Step 1: Clone the Repository</h3>
                    <p>First, clone the repository to your local machine:</p>
                    <pre>
git clone https://github.com/yourusername/lulbackend.git
cd lulbackend
                    </pre>
                </div>

                <div class="step">
                    <h3>Step 2: Configure Database</h3>
                    <p>Create a PostgreSQL database for the application:</p>
                    <pre>
# PostgreSQL commands
CREATE DATABASE lulpay;
CREATE USER lulpayuser WITH ENCRYPTED PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE lulpay TO lulpayuser;
                    </pre>
                    <p>Then, configure the database connection in <code>src/main/resources/application.properties</code>:</p>
                    <pre>
spring.datasource.url=jdbc:postgresql://localhost:5432/lulpay
spring.datasource.username=lulpayuser
spring.datasource.password=your_password
spring.jpa.hibernate.ddl-auto=update
                    </pre>
                </div>

                <div class="step">
                    <h3>Step 3: Configure External Services</h3>
                    <p>The application uses several external services that need to be configured:</p>
                    
                    <h4>Firebase (for Push Notifications)</h4>
                    <p>Download your Firebase service account key and place it in a secure location. Then add the path to <code>application.properties</code>:</p>
                    <pre>
firebase.credentials.file=/path/to/firebase-service-account.json
                    </pre>
                    
                    <h4>SendGrid (for Email Notifications)</h4>
                    <p>Create a <code>sendgrid.env</code> file in the root directory:</p>
                    <pre>
export SENDGRID_API_KEY='your_sendgrid_api_key'
                    </pre>
                    <div class="alert alert-warning">
                        <strong>Note:</strong> For security reasons, never commit API keys to version control.
                    </div>
                </div>

                <div class="step">
                    <h3>Step 4: Run the Application</h3>
                    <p>You can run the application using the Maven wrapper:</p>
                    
                    <h4>Windows</h4>
                    <pre>
.\mvnw.cmd spring-boot:run
                    </pre>
                    
                    <h4>Linux/macOS</h4>
                    <pre>
./mvnw spring-boot:run
                    </pre>
                    
                    <p>Alternatively, if you have Maven installed:</p>
                    <pre>
mvn spring-boot:run
                    </pre>
                    
                    <p>The application will start on port 8080 by default.</p>
                </div>

                <div class="step">
                    <h3>Step 5: Build for Production</h3>
                    <p>To build the application for production:</p>
                    <pre>
# Using Maven wrapper
.\mvnw.cmd clean package -Pprod

# Or with Maven installed
mvn clean package -Pprod
                    </pre>
                    
                    <p>This will create a JAR file in the <code>target</code> directory that can be deployed to a server.</p>
                    <pre>
java -jar target/lulpay-0.0.1-SNAPSHOT.jar
                    </pre>
                </div>

                <div class="row mt-4">
                    <div class="col-md-12">
                        <h2>Troubleshooting</h2>
                        <div class="accordion" id="backendTroubleshootingAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingThree">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                        Database connection issues
                                    </button>
                                </h2>
                                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#backendTroubleshootingAccordion">
                                    <div class="accordion-body">
                                        <p>Verify that:</p>
                                        <ul>
                                            <li>PostgreSQL is running</li>
                                            <li>Database credentials in <code>application.properties</code> are correct</li>
                                            <li>The database exists and the user has appropriate permissions</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingFour">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                        Firebase configuration errors
                                    </button>
                                </h2>
                                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#backendTroubleshootingAccordion">
                                    <div class="accordion-body">
                                        <p>If you encounter Firebase initialization errors:</p>
                                        <ul>
                                            <li>Ensure the service account key file path is correct</li>
                                            <li>Verify that the service account has the necessary permissions</li>
                                            <li>Check that the Firebase project is properly set up with FCM enabled</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-light mt-5 py-3">
        <div class="container text-center">
            <p>&copy; 2023 LulPay. All rights reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 